"use strict";(self.webpackChunkayon_docs=self.webpackChunkayon_docs||[]).push([[6035],{18679:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(67294),r=a(86010);const s={tabItem:"tabItem_Ymn6"};function i(e){let{children:t,hidden:a,className:i}=e;return n.createElement("div",{role:"tabpanel",className:(0,r.Z)(s.tabItem,i),hidden:a},t)}},73992:(e,t,a)=>{a.d(t,{Z:()=>w});var n=a(87462),r=a(67294),s=a(86010),i=a(72957),o=a(16550),l=a(75238),u=a(33609),c=a(92560);function d(e){return function(e){return r.Children.map(e,(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:t,label:a,attributes:n,default:r}}=e;return{value:t,label:a,attributes:n,default:r}}))}function h(e){const{values:t,children:a}=e;return(0,r.useMemo)((()=>{const e=t??d(a);return function(e){const t=(0,u.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,a])}function p(e){let{value:t,tabValues:a}=e;return a.some((e=>e.value===t))}function m(e){let{queryString:t=!1,groupId:a}=e;const n=(0,o.k6)(),s=function(e){let{queryString:t=!1,groupId:a}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return a??null}({queryString:t,groupId:a});return[(0,l._X)(s),(0,r.useCallback)((e=>{if(!s)return;const t=new URLSearchParams(n.location.search);t.set(s,e),n.replace({...n.location,search:t.toString()})}),[s,n])]}function k(e){const{defaultValue:t,queryString:a=!1,groupId:n}=e,s=h(e),[i,o]=(0,r.useState)((()=>function(e){let{defaultValue:t,tabValues:a}=e;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!p({value:t,tabValues:a}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${a.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const n=a.find((e=>e.default))??a[0];if(!n)throw new Error("Unexpected error: 0 tabValues");return n.value}({defaultValue:t,tabValues:s}))),[l,u]=m({queryString:a,groupId:n}),[d,k]=function(e){let{groupId:t}=e;const a=function(e){return e?`docusaurus.tab.${e}`:null}(t),[n,s]=(0,c.Nk)(a);return[n,(0,r.useCallback)((e=>{a&&s.set(e)}),[a,s])]}({groupId:n}),f=(()=>{const e=l??d;return p({value:e,tabValues:s})?e:null})();(0,r.useLayoutEffect)((()=>{f&&o(f)}),[f]);return{selectedValue:i,selectValue:(0,r.useCallback)((e=>{if(!p({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);o(e),u(e),k(e)}),[u,k,s]),tabValues:s}}var f=a(51048);const v={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function y(e){let{className:t,block:a,selectedValue:o,selectValue:l,tabValues:u}=e;const c=[],{blockElementScrollPositionUntilNextRender:d}=(0,i.o5)(),h=e=>{const t=e.currentTarget,a=c.indexOf(t),n=u[a].value;n!==o&&(d(t),l(n))},p=e=>{let t=null;switch(e.key){case"Enter":h(e);break;case"ArrowRight":{const a=c.indexOf(e.currentTarget)+1;t=c[a]??c[0];break}case"ArrowLeft":{const a=c.indexOf(e.currentTarget)-1;t=c[a]??c[c.length-1];break}}t?.focus()};return r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.Z)("tabs",{"tabs--block":a},t)},u.map((e=>{let{value:t,label:a,attributes:i}=e;return r.createElement("li",(0,n.Z)({role:"tab",tabIndex:o===t?0:-1,"aria-selected":o===t,key:t,ref:e=>c.push(e),onKeyDown:p,onClick:h},i,{className:(0,s.Z)("tabs__item",v.tabItem,i?.className,{"tabs__item--active":o===t})}),a??t)})))}function b(e){let{lazy:t,children:a,selectedValue:n}=e;const s=(Array.isArray(a)?a:[a]).filter(Boolean);if(t){const e=s.find((e=>e.props.value===n));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return r.createElement("div",{className:"margin-top--md"},s.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==n}))))}function g(e){const t=k(e);return r.createElement("div",{className:(0,s.Z)("tabs-container",v.tabList)},r.createElement(y,(0,n.Z)({},e,t)),r.createElement(b,(0,n.Z)({},e,t)))}function w(e){const t=(0,f.Z)();return r.createElement(g,(0,n.Z)({key:String(t)},e))}},75964:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>m,frontMatter:()=>o,metadata:()=>u,toc:()=>d});var n=a(87462),r=(a(67294),a(3905)),s=a(20398),i=a(87006);a(73992),a(18679);const o={id:"addon_ftrack_admin",title:"Ftrack Admin Docs",sidebar_label:"Ftrack"},l=void 0,u={unversionedId:"addon_ftrack_admin",id:"addon_ftrack_admin",title:"Ftrack Admin Docs",description:"{versions.Ftrack_Badge}",source:"@site/docs/addon_ftrack_admin.md",sourceDirName:".",slug:"/addon_ftrack_admin",permalink:"/docs/addon_ftrack_admin",draft:!1,editUrl:"https://github.com/ynput/ayon-documentation/tree/main/website/docs/addon_ftrack_admin.md",tags:[],version:"current",frontMatter:{id:"addon_ftrack_admin",title:"Ftrack Admin Docs",sidebar_label:"Ftrack"},sidebar:"Admin",previous:{title:"Flow (ShotGrid)",permalink:"/docs/addon_flow_admin"},next:{title:"ToonBoom Harmony",permalink:"/docs/addon_harmony_admin"}},c={},d=[{value:"Prepare Ftrack for AYON",id:"prepare-ftrack-for-ayon",level:2},{value:"Server URL",id:"server-url",level:3},{value:"Login",id:"login",level:3},{value:"Custom Attributes",id:"custom-attributes",level:3},{value:"Event Server",id:"event-server",level:2},{value:"What you need?",id:"what-you-need",level:3},{value:"Which user to use?",id:"which-user-to-use",level:3},{value:"How to run ftrack event server",id:"how-to-run-ftrack-event-server",level:3},{value:"Where to run event server",id:"where-to-run-event-server",level:3},{value:"Ftrack events",id:"ftrack-events",level:2},{value:"Sync to AYON",id:"sync-to-ayon",level:3},{value:"Synchronize Hierarchical and Entity Attributes",id:"synchronize-hierarchical-and-entity-attributes",level:3},{value:"Update Hierarchy thumbnails",id:"update-hierarchy-thumbnails",level:3},{value:"Update status on task action",id:"update-status-on-task-action",level:3},{value:"Sync status from Task to Parent",id:"sync-status-from-task-to-parent",level:3},{value:"Sync status from Task to Asset Version",id:"sync-status-from-task-to-asset-version",level:3},{value:"Sync status from Version to Task",id:"sync-status-from-version-to-task",level:3},{value:"Sync status on first created version",id:"sync-status-on-first-created-version",level:3},{value:"Update status on next task",id:"update-status-on-next-task",level:3},{value:"Publish plugins",id:"publish-plugins",level:2},{value:"Collect Ftrack Family",id:"collect-ftrack-family",level:3},{value:"Profiles",id:"profiles",level:4},{value:"Advanced adding if additional families present",id:"advanced-adding-if-additional-families-present",level:4}],h={toc:d},p="wrapper";function m(e){let{components:t,...o}=e;return(0,r.kt)(p,(0,n.Z)({},h,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(s.D,{mdxType:"ReactMarkdown"},i.M),(0,r.kt)("p",null,"Ftrack is currently the main project management option for AYON. This documentation assumes that you are familiar with Ftrack and its basic principles. If you're new to Ftrack, we recommend having a thorough look at ",(0,r.kt)("a",{parentName:"p",href:"https://help.ftrack.com/en/"},"Ftrack Official Documentation"),"."),(0,r.kt)("h2",{id:"prepare-ftrack-for-ayon"},"Prepare Ftrack for AYON"),(0,r.kt)("h3",{id:"server-url"},"Server URL"),(0,r.kt)("p",null,"If you want to connect Ftrack to AYON you might need to make few changes in Ftrack settings. These changes would take a long time to do manually, so we prepared a few Ftrack actions to help you out. First, you'll need to have Ftrack enabled in your AYON bundle, and enter the address to your Ftrack server."),(0,r.kt)("h3",{id:"login"},"Login"),(0,r.kt)("p",null,"Once your server is configured, restart AYON and you should be prompted to enter your ",(0,r.kt)("a",{parentName:"p",href:"/docs/addon_kitsu_artist#How-to-use-Ftrack-in-AYON"},"Ftrack credentials")," to be able to run our Ftrack actions. If you are already logged in to Ftrack in your browser, it is enough to press ",(0,r.kt)("inlineCode",{parentName:"p"},"Ftrack login")," and it will connect automatically."),(0,r.kt)("p",null,"For more details step by step on how to login to Ftrack in AYON to go ",(0,r.kt)("a",{parentName:"p",href:"/docs/addon_kitsu_artist#How-to-use-Ftrack-in-AYON"},"artist Ftrack login")," documentation."),(0,r.kt)("p",null,"You can only use our Ftrack Actions and publish to Ftrack if each artist is logged in."),(0,r.kt)("h3",{id:"custom-attributes"},"Custom Attributes"),(0,r.kt)("p",null,"After successfully connecting AYON with you Ftrack, you can right-click on any project in Ftrack and you should see a bunch of actions available. The most important one is called ",(0,r.kt)("inlineCode",{parentName:"p"},"AYON Admin")," and contains multiple options inside."),(0,r.kt)("p",null,"To prepare Ftrack for working with AYON you'll need to run ",(0,r.kt)("a",{parentName:"p",href:"/docs/addon_ftrack_manager#create-update-custom-attributes"},"AYON Admin - Create/Update Custom Attributes"),", which creates and sets the Custom Attributes necessary for AYON to function."),(0,r.kt)("h2",{id:"event-server"},"Event Server"),(0,r.kt)("p",null,"Ftrack Event Server is the key to automation of many tasks like ",(0,r.kt)("em",{parentName:"p"},"status change"),", ",(0,r.kt)("em",{parentName:"p"},"thumbnail update"),", ",(0,r.kt)("em",{parentName:"p"},"automatic synchronization to AYON server")," and many more. Event server should run at all times to perform the required processing as it is not possible to catch some of them retrospectively with enough certainty."),(0,r.kt)("h3",{id:"what-you-need"},"What you need?"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"You need a user which is used to connect to ftrack server, and it's API key."),(0,r.kt)("li",{parentName:"ol"},"A machine where the services will be running.")),(0,r.kt)("h3",{id:"which-user-to-use"},"Which user to use?"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"should have ",(0,r.kt)("inlineCode",{parentName:"li"},"Administrator")," role"),(0,r.kt)("li",{parentName:"ul"},"the same user should not be used by an artist"),(0,r.kt)("li",{parentName:"ul"},"the user should have permissions for private projects you want to sync")),(0,r.kt)("h3",{id:"how-to-run-ftrack-event-server"},"How to run ftrack event server"),(0,r.kt)("p",null,"At this moment event server consist of 2 processes Leecher and Processor. There are prepared docker images for each process. We do recommend to use ASH (AYON service host) to be able to control them from AYON server web. In that case make sure you have running ASH and create both services in ",(0,r.kt)("strong",{parentName:"p"},"Services")," on server."),(0,r.kt)("p",null,"There is option to run the services manually, in that case please check ftrack addon repository for more information."),(0,r.kt)("h3",{id:"where-to-run-event-server"},"Where to run event server"),(0,r.kt)("p",null,"We recommend you to run event server on stable server machine with ability to connect to AYON server and Ftrack web server. Best practice we recommend is to run event server as service. It can be Windows or Linux.\nFor a well functioning ftrack event server, we recommend a linux virtual server with Ubuntu or CentOS. CPU and RAM allocation needs differ based on the studio size, but a 2GB of ram, with a dual core CPU and around 4GB of storage should suffice."),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"ftrack-events"},"Ftrack events"),(0,r.kt)("p",null,"Events are helpers for automation. They react to Ftrack Web Server events like change entity attribute, create of entity, etc."),(0,r.kt)("h3",{id:"sync-to-ayon"},"Sync to AYON"),(0,r.kt)("p",null,"Automatic ",(0,r.kt)("a",{parentName:"p",href:"/docs/addon_ftrack_manager#synchronization-to-ayon-server"},"synchronization to pipeline database"),"."),(0,r.kt)("p",null,"This event updates entities on their changes Ftrack. When new entity is created or existing entity is modified. Interface with listing information is shown to users when ",(0,r.kt)("a",{parentName:"p",href:"/docs/addon_ftrack_manager#synchronization-rules"},"synchronization rules")," are not met. This event may also undo changes when they might break pipeline. Namely ",(0,r.kt)("em",{parentName:"p"},"change name of synchronized entity"),", ",(0,r.kt)("em",{parentName:"p"},"move synchronized entity in hierarchy"),"."),(0,r.kt)("h3",{id:"synchronize-hierarchical-and-entity-attributes"},"Synchronize Hierarchical and Entity Attributes"),(0,r.kt)("p",null,"Auto-synchronization of hierarchical attributes from Ftrack entities."),(0,r.kt)("p",null,"Related to ",(0,r.kt)("a",{parentName:"p",href:"/docs/addon_ftrack_manager#synchronization-to-ayon-server"},"Synchronize to AYON database")," event ",(0,r.kt)("em",{parentName:"p"},"(without it, it makes no sense to use this event)"),". Hierarchical attributes must be synchronized with special way so we needed to split synchronization into 2 parts. There are ",(0,r.kt)("a",{parentName:"p",href:"/docs/addon_ftrack_manager#synchronization-rules"},"synchronization rules")," for hierarchical attributes that must be met otherwise interface with messages about not meeting conditions is shown to user."),(0,r.kt)("h3",{id:"update-hierarchy-thumbnails"},"Update Hierarchy thumbnails"),(0,r.kt)("p",null,"Push thumbnails from version, up through multiple hierarchy levels"),(0,r.kt)("h3",{id:"update-status-on-task-action"},"Update status on task action"),(0,r.kt)("p",null,"When launching an action on a task in Ftrack, the status of the task can be updated. The mapping happens from the value to key, ei. if the key is ",(0,r.kt)("inlineCode",{parentName:"p"},"Ready")," and the value is ",(0,r.kt)("inlineCode",{parentName:"p"},"Not Ready"),", then the status will be updated to ",(0,r.kt)("inlineCode",{parentName:"p"},"Ready")," if its ",(0,r.kt)("inlineCode",{parentName:"p"},"Not Ready"),".\nThe mapping happens on a first-come-first-serve basis, from the top to the bottom."),(0,r.kt)("p",null,"There are two special tokens that can be used; ",(0,r.kt)("inlineCode",{parentName:"p"},"__any__")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"__ignore__")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"__any__")," - if this is in the value of a mapping, then any task status will be changed to the key (status) when launching an action.\n",(0,r.kt)("inlineCode",{parentName:"p"},"__ignore__")," - if this is in the key of a mapping, then any status (case insensitive) in the values will be ignored for updating the task status."),(0,r.kt)("p",null,"By default any task status will be updated to ",(0,r.kt)("inlineCode",{parentName:"p"},"In Progress")," when launching an action."),(0,r.kt)("h3",{id:"sync-status-from-task-to-parent"},"Sync status from Task to Parent"),(0,r.kt)("p",null,'List of parent object types where this is triggered ("Shot", "Asset build", etc. Skipped if it is empty)'),(0,r.kt)("h3",{id:"sync-status-from-task-to-asset-version"},"Sync status from Task to Asset Version"),(0,r.kt)("p",null,"This will sync the status from the task to the latest asset version on the task."),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"}," Due to a potential infinite status update loop, the event server user and the user updating the task status, need to be different. If it is the same user, the status will not be synced.")),(0,r.kt)("h3",{id:"sync-status-from-version-to-task"},"Sync status from Version to Task"),(0,r.kt)("p",null,"Updates Task status based on status changes on its Asset Version."),(0,r.kt)("p",null,"The issue this solves is when Asset version's status is changed but the artist assigned to Task is looking at the task status, thus not noticing the review."),(0,r.kt)("p",null,"This event makes sure statuses Asset Version get synced to it's task. After changing a status on version, this event first tries to set identical status to version's parent (usually task). But this behavior can be tweaked in settings."),(0,r.kt)("h3",{id:"sync-status-on-first-created-version"},"Sync status on first created version"),(0,r.kt)("p",null,"This event handler allows setting of different status to a first created Asset Version in Ftrack."),(0,r.kt)("p",null,"This is useful for example if first version publish doesn't contain any actual reviewable work, but is only used for roundtrip conform check, in which case this version could receive status ",(0,r.kt)("inlineCode",{parentName:"p"},"pending conform")," instead of standard ",(0,r.kt)("inlineCode",{parentName:"p"},"pending review")),(0,r.kt)("h3",{id:"update-status-on-next-task"},"Update status on next task"),(0,r.kt)("p",null,'Change status on next task by task types order when task status state changed to "Done". All tasks with the same Task mapping of next task status changes From \u2192 To. Some status can be ignored.'),(0,r.kt)("h2",{id:"publish-plugins"},"Publish plugins"),(0,r.kt)("h3",{id:"collect-ftrack-family"},"Collect Ftrack Family"),(0,r.kt)("p",null,"Reviews uploads to Ftrack could be configured by combination of hosts, families and task names.\n(Currently implemented only in Standalone Publisher, Maya.)"),(0,r.kt)("h4",{id:"profiles"},"Profiles"),(0,r.kt)("p",null,"Profiles are used to select when to add Ftrack family to the instance. One or multiple profiles could be configured, Families, Task names (regex available), Host names combination is needed."),(0,r.kt)("p",null,"Eg. If I want review created and uploaded to Ftrack for render published from Maya , setting is:"),(0,r.kt)("p",null,"Host names: 'maya'\nFamilies: 'render'\nAdd Ftrack Family: enabled"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Collect Ftrack Family",src:a(84165).Z,width:"571",height:"494"})),(0,r.kt)("h4",{id:"advanced-adding-if-additional-families-present"},"Advanced adding if additional families present"),(0,r.kt)("p",null,"In special cases adding 'ftrack' based on main family ('Families' set higher) is not enough.\n(For example upload to Ftrack for 'plate' main family should only happen if 'review' is contained in instance 'families', not added in other cases. )"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Collect Ftrack Family",src:a(94178).Z,width:"653",height:"270"})))}m.isMDXComponent=!0},94178:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/ftrack-collect-advanced-b50aaf1b10fab6a8288eedb5a4d77771.png"},84165:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/ftrack-collect-main-893f94de1a6f2d61775764a54a8efbbb.png"}}]);