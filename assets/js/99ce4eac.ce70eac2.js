"use strict";(self.webpackChunkayon_docs=self.webpackChunkayon_docs||[]).push([[7105],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>h});var a=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},d=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),c=p(n),m=i,h=c["".concat(s,".").concat(m)]||c[m]||u[m]||o;return n?a.createElement(h,r(r({ref:t},d),{},{components:n})):a.createElement(h,r({ref:t},d))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,r=new Array(o);r[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[c]="string"==typeof e?e:i,r[1]=l;for(var p=2;p<o;p++)r[p]=n[p];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},81647:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>r,default:()=>u,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var a=n(87462),i=(n(67294),n(3905));const o={id:"dev_addon_intro",title:"Addon Dev Intro",sidebar_label:"Addon Intro"},r=void 0,l={unversionedId:"dev_addon_intro",id:"dev_addon_intro",title:"Addon Dev Intro",description:"This page is still under construction \ud83d\udc77\ud83d\udea7\ud83d\udee0\ufe0f\ud83d\udd1c\ud83c\udfd7\ufe0f.",source:"@site/docs/dev_addon_intro.md",sourceDirName:".",slug:"/dev_addon_intro",permalink:"/docs/dev_addon_intro",draft:!1,editUrl:"https://github.com/ynput/ayon-documentation/tree/main/website/docs/dev_addon_intro.md",tags:[],version:"current",frontMatter:{id:"dev_addon_intro",title:"Addon Dev Intro",sidebar_label:"Addon Intro"},sidebar:"Dev",previous:{title:"Addon Development",permalink:"/docs/category/addon-development"},next:{title:"Addon Docs",permalink:"/docs/dev_addon_creation"}},s={},p=[{value:"Preface",id:"preface",level:2},{value:"AYON pipeline and pyblish adoption",id:"ayon-pipeline-and-pyblish-adoption",level:2},{value:"AYON Context, Publish Instances and Load containers",id:"ayon-context-publish-instances-and-load-containers",level:3},{value:"Publish workflow",id:"publish-workflow",level:3},{value:"Load workflow",id:"load-workflow",level:3}],d={toc:p},c="wrapper";function u(e){let{components:t,...o}=e;return(0,i.kt)(c,(0,a.Z)({},d,o,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"This page is still under construction \ud83d\udc77\ud83d\udea7\ud83d\udee0\ufe0f\ud83d\udd1c\ud83c\udfd7\ufe0f."),(0,i.kt)("p",{parentName:"admonition"},"Feel free to report any missing or wrong info.")),(0,i.kt)("h2",{id:"preface"},"Preface"),(0,i.kt)("admonition",{title:"History Lesson",type:"tip"},(0,i.kt)("p",{parentName:"admonition"},"Understanding history can provide deeper insights into the system and the rationale behind decisions made over time. This knowledge is particularly valuable at the initial stages of developing ",(0,i.kt)("inlineCode",{parentName:"p"},"addons")," documentation. As the documentation evolves to become self-sufficient, the reliance on historical context may diminish."),(0,i.kt)("ul",{parentName:"admonition"},(0,i.kt)("li",{parentName:"ul"},"It's started with ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/pyblish/pyblish/wiki"},"pyblish")," which introduced the capability to register and trigger publish plugins. "),(0,i.kt)("li",{parentName:"ul"},"Then, ",(0,i.kt)("a",{parentName:"li",href:"https://getavalon.github.io/2.0/overview/"},"avalon")," which was built on top of ",(0,i.kt)("inlineCode",{parentName:"li"},"pyblish")," straight with adding UI tools (launcher, creator, loader, publisher, manager, workfiles), extended ",(0,i.kt)("inlineCode",{parentName:"li"},"pyblish")," host integrations e.g. adding more publish plugins and it also used ",(0,i.kt)("inlineCode",{parentName:"li"},"mongoDB")," to store publish data. "),(0,i.kt)("li",{parentName:"ul"},"Then, ",(0,i.kt)("a",{parentName:"li",href:"https://openpype.io/"},"OpenPype")," which was built on top of ",(0,i.kt)("inlineCode",{parentName:"li"},"avalon")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"pyblish")," straight with much easier configuration/settings, extended ",(0,i.kt)("inlineCode",{parentName:"li"},"avalon")," host integrations and more pipeline tools e.g. look assigner.  "),(0,i.kt)("li",{parentName:"ul"},"Then, ",(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("a",{parentName:"strong",href:"https://ayon.ynput.io/"},"AYON")," which is like the Pok\xe9mon evolution of ",(0,i.kt)("inlineCode",{parentName:"strong"},"OpenPype"),".")," The system has been upgraded by relocating settings to a dedicated web server, enhancing modularity by segmenting it into smaller ",(0,i.kt)("inlineCode",{parentName:"li"},"addons"),", and introducing a toolkit to facilitate efficient production management."))),(0,i.kt)("p",null,"AYON addons enable us to effectively extend AYON's server and pipeline capabilities.\nThis guide is designed to clarify key concepts and outline the structure and features of addons, along with instructions for their implementation."),(0,i.kt)("h2",{id:"ayon-pipeline-and-pyblish-adoption"},"AYON pipeline and pyblish adoption"),(0,i.kt)("p",null,"AYON pipeline relies heavily on pyblish.\nEvery small addition is added as a pyblish plugin.\nEven the code that's responsible for registering the products in AYON Server is a pyblish plugin."),(0,i.kt)("h3",{id:"ayon-context-publish-instances-and-load-containers"},"AYON Context, Publish Instances and Load containers"),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"A standard data model is still in progress.")),(0,i.kt)("p",null,"On opening new files using AYON Launcher or workfile tool.\nAn AYON Context (which is a bunch of Environment variables) will be set."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Project Name"),(0,i.kt)("li",{parentName:"ul"},"Folder Path"),(0,i.kt)("li",{parentName:"ul"},"Task Name")),(0,i.kt)("p",null,"Any product in AYON have the following data:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Project Name"),(0,i.kt)("li",{parentName:"ul"},"Folder Path"),(0,i.kt)("li",{parentName:"ul"},"Product Name"),(0,i.kt)("li",{parentName:"ul"},"Representation(s)",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Representation Name"),(0,i.kt)("li",{parentName:"ul"},"Version")))),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Code Snippets: Print Context, Publish Instances and Load containers"),(0,i.kt)("p",null,"Take a moment and explore the available data in context, publish instances and load containers.\nHere you are some snippets to get started."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"## Print the Current Context\nfrom ayon_core.pipeline.context_tools import get_current_context\n\nprint( \n  \"Project: '{project_name}'\\nFolder Path: '{folder_path}'\\nTask Name: '{task_name}'\"\n  .format(\n    **get_current_context()\n  )\n)\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'## Access the existent publish instances via CreateContext \nfrom ayon_core.pipeline import registered_host\nfrom ayon_core.pipeline.create import CreateContext\n\nhost = registered_host()\ncreate_context = CreateContext(host)\nfor instance in create_context.instances:\n    print("Instance: {}".format(instance.data["productName"]))\n    # you can edit instances here\n    # if some_condition:\n    #   instance.data[key] = value\n    pass\n\n# To save change to context and instances\n# context.save_changes()\n')),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'## Show Loaded Items\nfrom ayon_core.pipeline import registered_host\n\nhost = registered_host()\ncontainers = host.get_containers()\nprint("Loaded Items:")\nfor item in containers:\n     print("  -", item["name"])\n'))),(0,i.kt)("h3",{id:"publish-workflow"},"Publish workflow"),(0,i.kt)("p",null,"previously discussed in ",(0,i.kt)("a",{parentName:"p",href:"https://help.ayon.app/articles/7070980-about-ayon-pipeline#7243zf37b25"},"What is publishing? | AYON Docs")," and ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/pyblish/pyblish/wiki/What-is-publishing"},'What is "publishing"? | Pyblish Wiki')),(0,i.kt)("p",null,(0,i.kt)("img",{src:n(68671).Z,width:"1123",height:"302"})),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"Check the diagram on Miro ",(0,i.kt)("a",{parentName:"p",href:"https://miro.com/app/board/uXjVMyPHrJg=/?share_link_id=550640792516"},"AYON Pipeline Publish Workflow"))),(0,i.kt)("p",null,"In a nutshell it follows ",(0,i.kt)("inlineCode",{parentName:"p"},"CCVEI"),": "),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Create: It searches your scene for AYON objects (Regular objects with Extra AYON attributes) and create publish instances of them."),(0,i.kt)("li",{parentName:"ul"},"Collect: It Collects necessary data for publish instances."),(0,i.kt)("li",{parentName:"ul"},"Validate: It validates the collected data."),(0,i.kt)("li",{parentName:"ul"},"Extract: It exports the data to the export (output) path specified in your publish instances.Usually, it's a relative location to ",(0,i.kt)("inlineCode",{parentName:"li"},"workfile")," (work directory)."),(0,i.kt)("li",{parentName:"ul"},"Integrate: It moves the exported files to the ",(0,i.kt)("inlineCode",{parentName:"li"},"publish")," location and registers them in AYON's DB.")),(0,i.kt)("admonition",{title:"Maya Example",type:"tip"},(0,i.kt)("p",{parentName:"admonition"},"A ",(0,i.kt)("inlineCode",{parentName:"p"},"Model")," product in Maya should have UVs to pass ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/ynput/ayon-maya/blob/develop/client/ayon_maya/plugins/publish/validate_mesh_has_uv.py"},"Mesh Has UVs")," validation.\n",(0,i.kt)("img",{src:n(52638).Z,width:"1299",height:"380"}))),(0,i.kt)("admonition",{title:"Product-Types Vs Representations",type:"tip"},(0,i.kt)("p",{parentName:"admonition"},"It's super important to differentiate between ",(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("a",{parentName:"strong",href:"https://help.ayon.app/articles/3030530-ayon-glossary#o0fmdiprmzp"},"product-types"))," and ",(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("a",{parentName:"strong",href:"https://help.ayon.app/articles/3030530-ayon-glossary#p3k2dz5wty6"},"representations"))," when dealing with AYON, and in short:"),(0,i.kt)("ul",{parentName:"admonition"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Product-Type"),": A product containing a specific type of information, e.g.",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"pointcache/animation"),": a character animation output as cache of its geometry only (no controls, no bones; just geometry cached)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"camera"),": a single camera"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"model"),": a static (clean) mesh adhering to studio rules like naming conventions, poly-flow, usually intended to be used as the clean geometry representing an asset."))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Representation"),": A file output for a product type.",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"e.g. the data of ",(0,i.kt)("strong",{parentName:"li"},"pointcache")," product-type could be stored in any format supporting geometrical caches, like Alembic, USD, bgeo, etc."),(0,i.kt)("li",{parentName:"ul"},"e.g. the data of ",(0,i.kt)("strong",{parentName:"li"},"camera")," product-type could be stored in any formatting supporting a single animated camera, e.g. Alembic, Maya scene, USD, etc.")))),(0,i.kt)("p",{parentName:"admonition"},"Note how ",(0,i.kt)("strong",{parentName:"p"},"representation")," is just a different file format for the same product type - as such, a single product type could have multiple representations which should technically (for as far as the file formats allow) contain all the data of that product-type.")),(0,i.kt)("h3",{id:"load-workflow"},"Load workflow"),(0,i.kt)("admonition",{title:"TODO",type:"note"},(0,i.kt)("p",{parentName:"admonition"},"Write about it and add an example.")))}u.isMDXComponent=!0},68671:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/publish_diagram-a922434544c77827d00e92fe31ba6694.png"},52638:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/publish_validation_error-d5029645ff2b3490427f4fc963b4f2a4.png"}}]);