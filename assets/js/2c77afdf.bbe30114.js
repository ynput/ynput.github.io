"use strict";(self.webpackChunkayon_docs=self.webpackChunkayon_docs||[]).push([[3180],{21054:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>r,default:()=>u,frontMatter:()=>i,metadata:()=>l,toc:()=>d});var a=n(87462),o=(n(67294),n(3905));const i={id:"addon_version_control_artist",title:"Version Control Artist Docs",sidebar_label:"Version Control",description:"Version Control Addon's documentations for artists.",toc_max_heading_level:5},r=void 0,l={unversionedId:"addon_version_control_artist",id:"addon_version_control_artist",title:"Version Control Artist Docs",description:"Version Control Addon's documentations for artists.",source:"@site/docs/addon_version_control_artist.md",sourceDirName:".",slug:"/addon_version_control_artist",permalink:"/docs/addon_version_control_artist",draft:!1,editUrl:"https://github.com/ynput/ayon-documentation/tree/main/website/docs/addon_version_control_artist.md",tags:[],version:"current",frontMatter:{id:"addon_version_control_artist",title:"Version Control Artist Docs",sidebar_label:"Version Control",description:"Version Control Addon's documentations for artists.",toc_max_heading_level:5},sidebar:"artist",previous:{title:"FAQ",permalink:"/docs/addon_usd_artist_faq"},next:{title:"Wrap",permalink:"/docs/addon_wrap_artist"}},s={},d=[{value:"Get Started",id:"get-started",level:2},{value:"User Setup",id:"user-setup",level:3},{value:"Launch Unreal with version control enabled",id:"launch-unreal-with-version-control-enabled",level:3},{value:"How Perforce support works",id:"how-perforce-support-works",level:2},{value:"Workflow",id:"workflow",level:3},{value:"Commit Strategy",id:"commit-strategy",level:3},{value:"<code>Publish to AYON</code> Process",id:"publish-to-ayon-process",level:3},{value:"Deadline",id:"deadline",level:3}],p={toc:d},c="wrapper";function u(e){let{components:t,...i}=e;return(0,o.kt)(c,(0,a.Z)({},p,i,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"Currently, the addon implements basic Perforce support inside of Unreal.")),(0,o.kt)("h2",{id:"get-started"},"Get Started"),(0,o.kt)("h3",{id:"user-setup"},"User Setup"),(0,o.kt)("admonition",{title:"Perforce Workspace",type:"info"},(0,o.kt)("p",{parentName:"admonition"},"It is expected that P4 workspaces would be setup and existed on artists machines."),(0,o.kt)("p",{parentName:"admonition"},"Initial checkout from Perforce should be done by P4V tool. ")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"Settings Location: ",(0,o.kt)("inlineCode",{parentName:"p"},"ayon+settings://version_control/local_setting?project={project_name}&site={site_id}"))),(0,o.kt)("p",null,(0,o.kt)("img",{src:n(25973).Z,width:"1037",height:"359"})),(0,o.kt)("p",null,"You'd need to setup your Perforce site settings: user name, password and path to existing configured Perforce workspace."),(0,o.kt)("h3",{id:"launch-unreal-with-version-control-enabled"},"Launch Unreal with version control enabled"),(0,o.kt)("p",null,(0,o.kt)("img",{src:n(32775).Z,width:"1175",height:"425"})),(0,o.kt)("p",null,"When starting Unreal via AYON Launcher, a pop window will show up before Unreal launch allows you to sync to specific a change list."),(0,o.kt)("p",null,"Any line with changelist could be selected and synched by ",(0,o.kt)("inlineCode",{parentName:"p"},"Sync to")," button. When synching process finishes, it will be highlighted under the list of changes."),(0,o.kt)("h2",{id:"how-perforce-support-works"},"How Perforce support works"),(0,o.kt)("h3",{id:"workflow"},"Workflow"),(0,o.kt)("p",null,"Perforce doesn't replace regular AYON publishing.\nBecause commit changes to perforce and publish to AYON are two separate actions.\nAnd, you can do both for the same asset!"),(0,o.kt)("p",null,"So for example, you can use AYON to publish assets and use perforce to setup and version control your scene."),(0,o.kt)("p",null,"Also, AYON will create ",(0,o.kt)("inlineCode",{parentName:"p"},"changelist_metadata")," product by default in your Unreal Scene.\n",(0,o.kt)("inlineCode",{parentName:"p"},"changelist_metadata")," product highlights the last existing ",(0,o.kt)("inlineCode",{parentName:"p"},"change list")," id at the time of publishing\nThis product must be enabled to trigger usage of Perforce on the Deadline.\nWithout it Deadline will just render from current state of Unreal project file."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Unreal AYON Changelist Metadata",src:n(70385).Z,width:"593",height:"543"})),(0,o.kt)("h3",{id:"commit-strategy"},"Commit Strategy"),(0,o.kt)("p",null,"Any manual commits done in Unreal projects via ",(0,o.kt)("inlineCode",{parentName:"p"},"Unreal editor official Perforce tool")," or via ",(0,o.kt)("inlineCode",{parentName:"p"},"P4V")," won't be add to AYON published products.\nUnlike publishing to AYON via AYON publisher will commit to Perforce any uncommitted changes and then publish your work to AYON."),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Inside Unreal"),(0,o.kt)("th",{parentName:"tr",align:null},"Visible in Perforce"),(0,o.kt)("th",{parentName:"tr",align:null},"Visible in AYON"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"commit manually"),(0,o.kt)("td",{parentName:"tr",align:null},"\u2705"),(0,o.kt)("td",{parentName:"tr",align:null})),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"commit manually"),(0,o.kt)("td",{parentName:"tr",align:null},"\u2705"),(0,o.kt)("td",{parentName:"tr",align:null})),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"Publish to AYON"),(0,o.kt)("td",{parentName:"tr",align:null},"\u2705"),(0,o.kt)("td",{parentName:"tr",align:null},"\u2705")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"commit manually"),(0,o.kt)("td",{parentName:"tr",align:null},"\u2705"),(0,o.kt)("td",{parentName:"tr",align:null})),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"Publish to AYON"),(0,o.kt)("td",{parentName:"tr",align:null},"\u2705"),(0,o.kt)("td",{parentName:"tr",align:null},"\u2705")))),(0,o.kt)("h3",{id:"publish-to-ayon-process"},(0,o.kt)("inlineCode",{parentName:"h3"},"Publish to AYON")," Process"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Commit to Perforce any uncommitted changes."),(0,o.kt)("li",{parentName:"ul"},"Publish ",(0,o.kt)("inlineCode",{parentName:"li"},"changelist metadata")," product as json file."),(0,o.kt)("li",{parentName:"ul"},"Publish your files to AYON.")),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"If you are publishing the same asset that you are pushing to perforce, then AYON publish will be more like taking a snapshot of that asset at a particular ",(0,o.kt)("inlineCode",{parentName:"p"},"change list")," and save it like any other published assets. which makes it available for other DCCs as well.")),(0,o.kt)("h3",{id:"deadline"},"Deadline"),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"Current Deadline implementation requires ",(0,o.kt)("inlineCode",{parentName:"p"},"P4")," depots to be of type 'stream' and workspace to be assigned to a stream.")),(0,o.kt)("p",null,"Unreal Perforce Deadline Support requires our ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/ynput/ayon-deadline/tree/develop/client/ayon_deadline/repository/custom/plugins/UnrealEngine5"},"custom ",(0,o.kt)("inlineCode",{parentName:"a"},"UnrealEngine5")," deadline plugin")," which implements ",(0,o.kt)("inlineCode",{parentName:"p"},"PreLoad")," scripts that syncs your project to ",(0,o.kt)("inlineCode",{parentName:"p"},"change list")," id within the ",(0,o.kt)("inlineCode",{parentName:"p"},"changelist_metadata")," before rendering."),(0,o.kt)("p",null,"Our custom ",(0,o.kt)("inlineCode",{parentName:"p"},"UnrealEngine5")," deadline plugin expects the following environment variables for each Deadline workers:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"P4PORT"),": Port number that perforce server uses ",(0,o.kt)("inlineCode",{parentName:"li"},"http://localhost:{Port}"),"."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"P4USER"),": Perforce user."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"P4PASSWD"),": Password of the given user.")),(0,o.kt)("admonition",{title:"Setting Environment Variables",type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"Environment variables could be set locally on the worker or be set on studio or project wise by admin via ",(0,o.kt)("a",{parentName:"p",href:"/docs/addon_applications_admin#applications-definitions"},"application settings"),".")))}u.isMDXComponent=!0},32775:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/perforce_changes_viewer-404f00c2a4f4a580a155df5ade6e5335.png"},25973:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/site_settings_user_credentials-f666a30dc8f5d2bb2cad7480b99fa1cd.png"},70385:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/unreal_perforce_changelist_metadata-774263d62086c4a54afd7bdaae6144f4.png"}}]);